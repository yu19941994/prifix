(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0037f72c"],{"0252":function(e,t,c){"use strict";c.r(t);c("a4d3"),c("e01a");var a=c("7a23"),o={class:"container-fluid"},r=Object(a["createVNode"])("h2",{class:"h5 text-white mt-5"}," # 文章列表 ",-1),i={class:"rounded bg-dark p-3 mb-5 box--shadow"},l={class:"d-flex justify-content-end mb-3"},n=Object(a["createVNode"])("span",{class:"material-icons font--sm"},"add",-1),s=Object(a["createTextVNode"])(" 新增文章 "),d={class:"table table-dark"},u=Object(a["createVNode"])("thead",null,[Object(a["createVNode"])("tr",{class:"table-success"},[Object(a["createVNode"])("th",{scope:"col",width:"100"},"作者"),Object(a["createVNode"])("th",{scope:"col",width:"100"},"撰寫日期"),Object(a["createVNode"])("th",{scope:"col",width:"180"},"標題"),Object(a["createVNode"])("th",{scope:"col",width:"100"},"是否公開"),Object(a["createVNode"])("th",{scope:"col",width:"100"},"標籤"),Object(a["createVNode"])("th",{scope:"col"},"文章描述"),Object(a["createVNode"])("th",{scope:"col",width:"180"},"編輯")])],-1),b={scope:"row"},p=Object(a["createVNode"])("span",{class:"material-icons font--sm"},"edit",-1),m=Object(a["createTextVNode"])(" 編輯 "),j=Object(a["createVNode"])("span",{class:"material-icons font--sm"},"delete",-1),O=Object(a["createTextVNode"])(" 刪除 ");function g(e,t,c,g,h,N){var V=Object(a["resolveComponent"])("loading"),f=Object(a["resolveComponent"])("PaginationCom"),v=Object(a["resolveComponent"])("ArticleModalCom");return Object(a["openBlock"])(),Object(a["createBlock"])("div",o,[Object(a["createVNode"])(V,{active:h.isLoading,"onUpdate:active":t[1]||(t[1]=function(e){return h.isLoading=e}),"is-full-page":h.fullPage},null,8,["active","is-full-page"]),r,Object(a["createVNode"])("div",i,[Object(a["createVNode"])("div",l,[Object(a["createVNode"])("button",{type:"button",class:"btn btn-success text-white","data-bs-toggle":"modal","data-bs-target":"#articleModal",onClick:t[2]||(t[2]=function(e){return N.adjustStatus(!0)})},[n,s])]),Object(a["createVNode"])("table",d,[u,Object(a["createVNode"])("tbody",null,[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(h.articles,(function(e){return Object(a["openBlock"])(),Object(a["createBlock"])("tr",{key:e.id},[Object(a["createVNode"])("th",b,Object(a["toDisplayString"])(e.author),1),Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(N.timestampToDate(e.create_at)),1),Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(e.title),1),Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(e.isPublic?"是":"否"),1),Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(e.tag),1),Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(e.description),1),Object(a["createVNode"])("td",null,[Object(a["createVNode"])("button",{type:"button",class:"btn btn-sm btn-light me-1","data-bs-toggle":"modal","data-bs-target":"#articleModal",onClick:function(t){return N.adjustStatus(!1,e,"put")}},[p,m],8,["onClick"]),Object(a["createVNode"])("button",{type:"button",class:"btn btn-sm btn-danger text-white","data-bs-toggle":"modal","data-bs-target":"#articleModal",onClick:function(t){return N.adjustStatus(!1,e,"del")}},[j,O],8,["onClick"])])])})),128))])]),Object(a["createVNode"])(f,{page:h.pagination,onGetPage:N.getArticle},null,8,["page","onGetPage"])]),Object(a["createVNode"])(v,{ref:"modal",onGetArticle:N.getArticle,"is-new":h.isNew,status:h.status,onIsLoading:N.isLoadingHandler},null,8,["onGetArticle","is-new","status","onIsLoading"])])}var h=c("1da1"),N=(c("96cf"),c("99af"),{id:"articleModal",ref:"modal",class:"modal fade",tabindex:"-1","aria-labelledby":"articleModalLabel","aria-hidden":"true"}),V={key:0,class:"modal-dialog modal-xl modal-dialog-centered"},f={class:"modal-content border-0"},v={class:"modal-header bg-dark text-white"},w={id:"productModalLabel",class:"modal-title"},x={key:0},A={key:1},k=Object(a["createVNode"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),y={class:"modal-body"},D={class:"row"},S={class:"form-group col-md-6"},T=Object(a["createVNode"])("label",{for:"author"},[Object(a["createTextVNode"])("作者"),Object(a["createVNode"])("span",{class:"text-danger font--xs"},"(*必填)")],-1),B={class:"form-group col-md-6"},M=Object(a["createVNode"])("label",{for:"create_at"},[Object(a["createTextVNode"])("創建日期"),Object(a["createVNode"])("span",{class:"text-danger font--xs"},"(*必填)")],-1),$={class:"row"},C={class:"form-group col-md-6"},_=Object(a["createVNode"])("label",{for:"title"},[Object(a["createTextVNode"])("標題"),Object(a["createVNode"])("span",{class:"text-danger font--xs"},"(*必填)")],-1),L={class:"col-md-6"},P=Object(a["createVNode"])("label",{for:"isPublic"},[Object(a["createTextVNode"])("是否公開"),Object(a["createVNode"])("span",{class:"text-danger font--xs"},"(*必填)")],-1),U={class:"input-group mb-0"},J=Object(a["createVNode"])("option",{value:!0},"是",-1),G=Object(a["createVNode"])("option",{value:!1},"否",-1),I=Object(a["createVNode"])("hr",null,null,-1),R={class:"form-group"},F=Object(a["createVNode"])("label",{for:"image"},"圖片",-1),Z={class:"form-group"},H=Object(a["createVNode"])("label",{for:"description"},"描述",-1),Y={class:"form-group"},q=Object(a["createVNode"])("label",{for:"content"},[Object(a["createTextVNode"])("文章內容"),Object(a["createVNode"])("span",{class:"text-danger font--xs"},"(*必填)")],-1),z={class:"form-group"},E=Object(a["createVNode"])("label",{for:"tag"},[Object(a["createTextVNode"])("標籤"),Object(a["createVNode"])("span",{class:"text-danger font--xs"},"(*請以頓號做分隔)")],-1),K={class:"modal-footer"},Q=Object(a["createVNode"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function W(e,t,c,o,r,i){var l=Object(a["resolveComponent"])("DelModal");return Object(a["openBlock"])(),Object(a["createBlock"])("div",N,["delete"!==c.status?(Object(a["openBlock"])(),Object(a["createBlock"])("div",V,[Object(a["createVNode"])("div",f,[Object(a["createVNode"])("div",v,[Object(a["createVNode"])("h5",w,["post"===c.status?(Object(a["openBlock"])(),Object(a["createBlock"])("span",x,"新增文章")):(Object(a["openBlock"])(),Object(a["createBlock"])("span",A,"編輯文章"))]),k]),Object(a["createVNode"])("div",y,[Object(a["createVNode"])("div",D,[Object(a["createVNode"])("div",S,[T,Object(a["withDirectives"])(Object(a["createVNode"])("input",{id:"author",type:"text",class:"form-control",placeholder:"請輸入作者","onUpdate:modelValue":t[1]||(t[1]=function(e){return r.tempArticle.author=e})},null,512),[[a["vModelText"],r.tempArticle.author]])]),Object(a["createVNode"])("div",B,[M,Object(a["withDirectives"])(Object(a["createVNode"])("input",{id:"create_at",type:"date",class:"form-control",placeholder:"請輸入創建日期","onUpdate:modelValue":t[2]||(t[2]=function(e){return r.tempArticle.create_at=e})},null,512),[[a["vModelText"],r.tempArticle.create_at]])])]),Object(a["createVNode"])("div",$,[Object(a["createVNode"])("div",C,[_,Object(a["withDirectives"])(Object(a["createVNode"])("input",{id:"title",type:"text",min:"0",class:"form-control",placeholder:"請輸入標題","onUpdate:modelValue":t[3]||(t[3]=function(e){return r.tempArticle.title=e})},null,512),[[a["vModelText"],r.tempArticle.title]])]),Object(a["createVNode"])("div",L,[P,Object(a["createVNode"])("div",U,[Object(a["withDirectives"])(Object(a["createVNode"])("select",{class:"form-select",id:"isPublic","onUpdate:modelValue":t[4]||(t[4]=function(e){return r.tempArticle.isPublic=e})},[J,G],512),[[a["vModelSelect"],r.tempArticle.isPublic]])])])]),I,Object(a["createVNode"])("div",R,[F,Object(a["withDirectives"])(Object(a["createVNode"])("input",{"onUpdate:modelValue":t[5]||(t[5]=function(e){return r.tempArticle.image=e}),type:"text",class:"form-control",placeholder:"請輸入圖片連結",id:"image"},null,512),[[a["vModelText"],r.tempArticle.image]]),Object(a["createVNode"])("img",{class:"img-fluid",src:r.tempArticle.image},null,8,["src"])]),Object(a["createVNode"])("div",Z,[H,Object(a["withDirectives"])(Object(a["createVNode"])("input",{id:"description",type:"text",min:"0",class:"form-control",placeholder:"請輸入文章描述","onUpdate:modelValue":t[6]||(t[6]=function(e){return r.tempArticle.description=e})},null,512),[[a["vModelText"],r.tempArticle.description]])]),Object(a["createVNode"])("div",Y,[q,Object(a["withDirectives"])(Object(a["createVNode"])("textarea",{id:"content",type:"text",class:"form-control",placeholder:"請輸入文章內容","onUpdate:modelValue":t[7]||(t[7]=function(e){return r.tempArticle.content=e})},"\n            ",512),[[a["vModelText"],r.tempArticle.content]])]),Object(a["createVNode"])("div",z,[E,Object(a["withDirectives"])(Object(a["createVNode"])("input",{id:"tag",type:"text",class:"form-control",placeholder:"請輸入文章標籤","onUpdate:modelValue":t[8]||(t[8]=function(e){return r.tempArticle.tag=e})},null,512),[[a["vModelText"],r.tempArticle.tag]])])]),Object(a["createVNode"])("div",K,[Q,Object(a["createVNode"])("button",{type:"button",class:"btn btn-success",onClick:t[9]||(t[9]=function(e){return i.updateArticle(r.tempArticle)})}," 確認 ")])])])):(Object(a["openBlock"])(),Object(a["createBlock"])(l,{key:1,onDelItem:i.delArticle,temp:r.tempArticle,action:r.action,status:c.status},null,8,["onDelItem","temp","action","status"]))],512)}c("caad"),c("2532");var X=c("7b17"),ee=c("4186"),te={props:["isNew","status"],components:{DelModal:ee["a"]},data:function(){return{tempArticle:{imageUrl:"",tags:[]},image:"",action:"article"}},methods:{updateArticle:function(e){var t=this;this.$emit("is-loading",!0);var c="".concat("https://vue3-course-api.hexschool.io","/api/").concat("uy_neish","/admin/article"),a="post";this.isNew||(console.log(e),a="put",c="".concat("https://vue3-course-api.hexschool.io","/api/").concat("uy_neish","/admin/article/").concat(e.id)),this.tempArticle.create_at=this.DateToTimestamp(this.tempArticle.create_at),this.$http[a](c,{headers:{"Access-Control-Allow-Origin":"*"},data:this.tempArticle}).then((function(e){if(t.$emit("is-loading",!1),console.log(e),e.data.success)t.$emit("get-article"),t.modal.hide(),t.$swal({title:"成功",icon:"success"}),t.tempArticle={};else{var c="";e.data.message.includes(" title 欄位為必填")&&(c+="標題欄位為必填,"),e.data.message.includes(" author 欄位為必填")&&(c+="作者欄位為必填,"),e.data.message.includes(" isPublic 欄位為必填")&&(c+="是否公開欄位為必填,"),e.data.message.includes(" content 欄位為必填")&&(c+="文章內容欄位為必填,"),e.data.message.includes("create_at 型別錯誤")&&(c+="創建日期欄位為必填,"),t.$swal({title:c,icon:"error"})}t.tempArticle={}})).catch((function(e){return console.log(e.message)}))},delArticle:function(){var e=this;this.$emit("is-loading",!0),console.log(this.tempArticle),this.axios.delete("".concat("https://vue3-course-api.hexschool.io","/api/").concat("uy_neish","/admin/article/").concat(this.tempArticle.id)).then((function(t){e.$emit("is-loading",!1),console.log(t),t.data.success&&(e.$emit("get-article"),e.modal.hide(),e.$swal({title:"刪除成功",icon:"success"}))})).catch((function(e){return console.log(e)}))},DateToTimestamp:function(e){return Date.parse(e)/1e3}},mounted:function(){this.modal=new X["a"](this.$refs.modal)}};te.render=W;var ce=te,ae=c("1799"),oe=c("9062"),re=c.n(oe),ie={components:{ArticleModalCom:ce,PaginationCom:ae["a"],Loading:re.a},data:function(){return{productModal:{},articles:[],pagination:{},isNew:!1,status:"",singleArticle:{},isLoading:!1,fullPage:!0}},methods:{getArticle:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.isLoading=!0;var c="".concat("https://vue3-course-api.hexschool.io","/api/").concat("uy_neish","/admin/articles?page=").concat(t);this.axios.get(c).then((function(t){e.isLoading=!1,console.log(t.data),t.data.success&&(e.articles=t.data.articles,e.pagination=t.data.pagination)})).catch((function(e){return console.log(e)}))},getSingleArticle:function(e){var t=this;return Object(h["a"])(regeneratorRuntime.mark((function c(){var a,o,r;return regeneratorRuntime.wrap((function(c){while(1)switch(c.prev=c.next){case 0:return a="".concat("https://vue3-course-api.hexschool.io","/api/").concat("uy_neish","/admin/article/").concat(e.id),o=t,c.prev=2,c.next=5,o.axios.get(a);case 5:r=c.sent,t.singleArticle=r.data.article,c.next=12;break;case 9:c.prev=9,c.t0=c["catch"](2),console.log(c.t0);case 12:case"end":return c.stop()}}),c,null,[[2,9]])})))()},adjustStatus:function(e,t,c){var a=this;return Object(h["a"])(regeneratorRuntime.mark((function o(){var r;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(a.isNew=e,a.isNew?a.status="post":a.status="put"===c?"put":"delete","post"===a.status&&(a.$refs.modal.tempArticle={imageUrl:""},a.$bus.emit("tempArticle",a.$refs.modal.tempArticle)),!t||"put"!==a.status){o.next=10;break}return o.next=6,a.getSingleArticle(t);case 6:r=JSON.parse(JSON.stringify(a.singleArticle)),r.create_at=a.timestampToDate(r.create_at),a.$refs.modal.tempArticle=r,a.$bus.emit("tempArticle",a.$refs.modal.tempArticle);case 10:t&&"delete"===a.status&&(a.$refs.modal.tempArticle=JSON.parse(JSON.stringify(t)),a.$bus.emit("tempArticle",a.$refs.modal.tempArticle));case 11:case"end":return o.stop()}}),o)})))()},timestampToDate:function(e){if(e){var t=new Date(1e3*e);return"".concat(t.getFullYear(),"-").concat(this.adjustZero(t.getMonth()+1),"-").concat(this.adjustZero(t.getDate()))}},adjustZero:function(e){return e<10?"0".concat(e):"".concat(e)},isLoadingHandler:function(e){this.isLoading=!0===e}},created:function(){this.getArticle()}};ie.render=g;t["default"]=ie},1799:function(e,t,c){"use strict";var a=c("7a23"),o={"aria-label":"Page navigation"},r={class:"pagination justify-content-center"},i=Object(a["createVNode"])("span",{"aria-hidden":"true"},"«",-1),l=Object(a["createVNode"])("span",{"aria-hidden":"true"},"»",-1);function n(e,t,c,n,s,d){return Object(a["openBlock"])(),Object(a["createBlock"])("nav",o,[Object(a["createVNode"])("ul",r,[Object(a["createVNode"])("li",{class:["page-item",{disabled:!c.page.has_pre}]},[Object(a["createVNode"])("a",{class:"page-link",href:"#","aria-label":"Previous",onClick:t[1]||(t[1]=Object(a["withModifiers"])((function(t){return e.$emit("get-page",c.page.current_page-1)}),["prevent"]))},[i])],2),(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(c.page.total_pages,(function(t){return Object(a["openBlock"])(),Object(a["createBlock"])("li",{class:["page-item",{active:t===c.page.current_page}],key:t},[Object(a["createVNode"])("a",{class:"page-link",href:"#",onClick:Object(a["withModifiers"])((function(c){return e.$emit("get-page",t)}),["prevent"])},Object(a["toDisplayString"])(t),9,["onClick"])],2)})),128)),Object(a["createVNode"])("li",{class:["page-item",{disabled:!c.page.has_next}]},[Object(a["createVNode"])("a",{class:"page-link",href:"#","aria-label":"Next",onClick:t[2]||(t[2]=Object(a["withModifiers"])((function(t){return e.$emit("get-page",c.page.current_page+1)}),["prevent"]))},[l])],2)])])}var s={props:["page"]};s.render=n;t["a"]=s},4186:function(e,t,c){"use strict";var a=c("7a23"),o={class:"modal-dialog modal-dialog-centered"},r={class:"modal-content border-0"},i={class:"modal-header bg-danger text-white"},l={id:"delProductModalLabel",class:"modal-title"},n=Object(a["createVNode"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),s={class:"modal-body"},d=Object(a["createTextVNode"])(" 是否刪除 "),u={class:"text-danger"},b=Object(a["createTextVNode"])(" (刪除後將無法恢復)。 "),p={class:"modal-footer"},m=Object(a["createVNode"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function j(e,t,c,j,O,g){return Object(a["openBlock"])(),Object(a["createBlock"])("div",o,[Object(a["createVNode"])("div",r,[Object(a["createVNode"])("div",i,[Object(a["createVNode"])("h5",l,[Object(a["withDirectives"])(Object(a["createVNode"])("span",null,"刪除產品",512),[[a["vShow"],"product"===c.action]]),Object(a["withDirectives"])(Object(a["createVNode"])("span",null,"刪除全部訂單",512),[[a["vShow"],"order"===c.action&&"delAll"===c.status]]),Object(a["withDirectives"])(Object(a["createVNode"])("span",null,"刪除訂單",512),[[a["vShow"],"order"===c.action&&"delete"===c.status]]),Object(a["withDirectives"])(Object(a["createVNode"])("span",null,"刪除優惠券",512),[[a["vShow"],"coupon"===c.action]]),Object(a["withDirectives"])(Object(a["createVNode"])("span",null,"刪除文章",512),[[a["vShow"],"article"===c.action]])]),n]),Object(a["createVNode"])("div",s,[d,Object(a["withDirectives"])(Object(a["createVNode"])("strong",{class:"text-danger"},Object(a["toDisplayString"])(c.temp.title),513),[[a["vShow"],"product"===c.action]]),Object(a["withDirectives"])(Object(a["createVNode"])("strong",{class:"text-danger"},"訂單編號："+Object(a["toDisplayString"])(c.temp.num),513),[[a["vShow"],"order"===c.action&&"delete"===c.status]]),Object(a["withDirectives"])(Object(a["createVNode"])("strong",u,"全部產品",512),[[a["vShow"],"order"===c.action&&"delAll"===c.status]]),Object(a["withDirectives"])(Object(a["createVNode"])("strong",{class:"text-danger"},"優惠券："+Object(a["toDisplayString"])(c.temp.title),513),[[a["vShow"],"coupon"===c.action]]),Object(a["withDirectives"])(Object(a["createVNode"])("strong",{class:"text-danger"},"文章："+Object(a["toDisplayString"])(c.temp.title),513),[[a["vShow"],"article"===c.action]]),b]),Object(a["createVNode"])("div",p,[m,Object(a["createVNode"])("button",{type:"button",class:"btn btn-danger",onClick:t[1]||(t[1]=function(t){return e.$emit("del-item")})}," 確認刪除 ")])])])}var O={props:["temp","action","status"]};O.render=j;t["a"]=O}}]);
//# sourceMappingURL=chunk-0037f72c.9ea0f5c1.js.map